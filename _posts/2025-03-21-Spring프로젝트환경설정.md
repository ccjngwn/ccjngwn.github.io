---
layout: post
title: "[Spring] 프로젝트 환경 설정"
date: 2025-03-21 22:05:00 +09:00
categories: [Spring]
tags: [Spring, 환경 설정]
---

김영한님 "스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술"을 들으며 배운 내용을 정리한다.

# 프로젝트 생성
먼저 [스프링 부트 스타터 사이트](https://start.spring.io)로 이동한다.

![Image](https://github.com/user-attachments/assets/6d2f6761-3961-4aae-b24d-e0deed919b91)

간단하게 살펴보자.
🔹 Gradle(Groovy)
가장 많이 사용되는 전통적인 Gradle 방식
빠른 빌드 속도와 유연한 빌드 설정이 필요할 때
Groovy를 이해하고 있다면 선택
🔹 Gradle(Kotlin)
Kotlin을 주로 사용하는 프로젝트라면 추천
IDE의 자동완성 기능이 강력하여 코드 안정성이 높음
타입 안정성을 중요하게 생각하는 경우 선택
🔹 Maven
안정적이고 체계적인 프로젝트 관리가 필요할 때
대규모 프로젝트에서 의존성 충돌을 최소화하고 싶을 때
XML 기반 설정이 익숙하다면 선택

따라서 Gradle-Groovy를 선택하겠다.

다음으로 사용 언어는 Java이기에 자바를 선택하고 Spring boot는 Snapshot과 M3등 뒤에 수식어가 달려있는 것들은 아직 정식 출시가 된 것이 아니기 때문에 이를 제외하고 최신 버전을 사용한다. 따라서 지금은 3.4.4를 선택하겠다.

Project Metadata는 프로젝트의 기본 정보를 정의하는 데이터다. 프로젝트를 식별하는 역할을 한다.
Group : 프로젝트의 도메인 네임 또는 패키지명
Artifact : 프로젝트의 이름(빌드 결과물 이름)
Name : 프로젝트의 이름(기본적으로 Artifact와 동일)
Description : 프로젝트에 대한 간단한 설명
Package Name : 생성될 기본 패키지 경로
Packaging : 빌드 결과물의 형태(Jar 또는 War)
Java Version : 사용할 Java 버전

첫 프로젝트이니 간단하게 Group을 hello로 바꾸고 Artifact를 hello-spring으로 바꾸고 시작하겠다.
오른쪽을 보면 Dependencies가 있다. 이건 프로젝트에서 필요한 라이브러리의 목록이다. 여기서는 Spring Web, Thymeleaf 두 개를 추가하겠다. Spring web은 웹 어플리케이션을 만들 수 있고, Thymeleaf는 템플릿 엔진이다.
템플릿 엔진은 HTML과 같은 정적인 문서에 동적인 데이터를 넣어 화면을 생성하는 기술이다.

이렇게 설정해서 아래에 GENERATE를 선택하면 JIP 파일로 압축하여 다운 받을 수 있다. 압축을 풀고 intellij에서 열어주면 프로젝트 생성 성공이다.
이제 src/main/java에서 HelloSpringApplication.java를 실행해준다. 그 후에 web에서 localhost:8080에 접속하면 된다.
![Image](https://github.com/user-attachments/assets/f7448a41-cc70-4e92-8b54-8b4d6d72379b)
이런 이미지가 뜨면 성공이다!

# View 환경설정
이제 저렇게 에러페이지로 뜨는 부분을 바꿔보겠다.
먼저 src/resources/static에 index.html을 만들어서 아래 코드를 넣어준다.
``` HTML
<!DOCTYPE HTML>
<html>
<head>
    <title>Hello</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
Hello
<a href="/hello">hello</a>
</body>
</html>
```
정지했다가 다시 실행해보면 아래와 같은 페이지가 나온다.
![Image](https://github.com/user-attachments/assets/96625d91-c47f-487c-ad8d-512f170bca02)

이건 스프링 부트가 제공하는 Welcome page 기능이다.
지금은 뒤에 hello를 클릭하면 페이지 오류가 나온다.


이제 아까 추가했던 라이브러리인 Thymeleaf 템플릿 엔진을 이용하여 동적 기능을 구현해보자.

src/main/java/hello.hello_spring에서 controller 패키지를 추가해서 HelloController 클래스를 추가한다.
``` Java
package hello.hello_spring.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class HelloController {

    @GetMapping("hello")
    public String hello(Model model) {
        model.addAttribute("data", "hello!!");
        return "hello";
    }
}
```
위 코드를 추가하고 src/resources/templates에 hello.html을 추가한다.
```HTML
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Hello</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<p th:text="'안녕하세요. ' + ${data}" >안녕하세요. 손님</p>
</body>
</html>
```

이렇게 하면 웹에서 localhost:8080/hello로 접속했을 때 안녕하세요. hello!가 나오는 페이지로 접속할 수 있다. localhost:8080에서 hello 링크를 클릭해서도 접속 가능하다.

동작 원리는 다음과 같다.
![Image](https://github.com/user-attachments/assets/ca0e05da-167c-4b45-800d-1a55c573c768)
웹 브라우저에서 localhost:8080/hello로 접속을 요청하면 내장되어있는 톰캣 서버에서 @GetMapping에 해당 url이 있는 지 본다. 우리는 HelloController에 @GetMapping("hello")라고 적어두었기 때문에 hello url이 매칭된거다. 그러면 그 아래 메소드가 실행된다. 여기서 model의 key가 data고 값은 hello이다. 그리고 hello를 반환한다. hello를 리턴했기 때문에 templates에 있는 hello.html을 렌더링하게 된다. 그 파일에서는 8번째 줄에 ${data}를 사용하는 것을 볼 수 있다. 이전에 model의 data를 hello라고 지정해두었기 때문에 이 내용은 hello로 치환되어 화면에 나타나게 된다.

# 빌드하고 실행하기
이제 터미널에서 위 프로젝트가 있는 파일로 이동한다. cd 명령어를 사용하면 이동할 수 있다.
그 후에 맥은 ./gradlew build를 치고 엔터키로 실행한다.
![Image](https://github.com/user-attachments/assets/06551455-e39f-47d8-8564-b3918409ab10)
그럼 이렇게 실행된다.
이제 cd build/libs 명령어를 쳐 이동한다. ll을 쳐서 무슨 파일이 있는 지 확인한 후 SNAPSHOT.jar이 붙은 파일 명을 복사한 후
``` terminal
java -jar [복사한 파일명]
```
을 실행해주면 된다.
그럼 localhost:8080으로 들어가면 실행되는 걸 확인할 수 있다.